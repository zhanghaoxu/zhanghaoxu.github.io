---
title: 03-JavaScript åŸºäºåŸå‹é“¾çš„ç»§æ‰¿ è¯¦è§£
---

ç†è§£ JavaScript çš„åŸå‹ã€åŸå‹é“¾ã€æ„é€ å‡½æ•°å’Œç»§æ‰¿æ˜¯æŒæ¡è¿™é—¨è¯­è¨€çš„å…³é”®ã€‚

<!--more-->

# ğŸ§¬ JavaScript é¢å‘å¯¹è±¡æ ¸å¿ƒï¼šåŸå‹ã€åŸå‹é“¾ä¸ç»§æ‰¿

## 1. æ¦‚è¿°

JavaScript é‡‡ç”¨**åŸå‹ç»§æ‰¿** (Prototype-based Inheritance) æ¥å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ï¼Œè¿™ä¸åŸºäºç±»çš„è¯­è¨€ï¼ˆå¦‚ Javaï¼‰æœ‰æ‰€ä¸åŒã€‚å…¶æ ¸å¿ƒåœ¨äº**æ¯ä¸ªå¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼ˆå…¶åŸå‹ï¼‰çš„å†…éƒ¨é“¾æ¥**ï¼Œä»è€Œå½¢æˆä¸€æ¡**åŸå‹é“¾** (Prototype Chain)ã€‚å½“è®¿é—®å¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œè‹¥å¯¹è±¡è‡ªèº«ä¸å­˜åœ¨è¯¥æˆå‘˜ï¼Œå¼•æ“ä¼š**æ²¿åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾**ï¼Œç›´è‡³æ‰¾åˆ°æˆ–æŠµè¾¾é“¾çš„æœ«ç«¯ï¼ˆ`null`ï¼‰ã€‚

ä¸ºäº†è®©ä½ å¿«é€Ÿå»ºç«‹æ•´ä½“è®¤çŸ¥ï¼Œä¸‹é¢ç”¨ä¸€ä¸ªè¡¨æ ¼æ¦‚æ‹¬è¿™äº›æ ¸å¿ƒæ¦‚å¿µï¼š

| æ¦‚å¿µ         | æè¿°                                           | å…³é”®ç‚¹                                                             |
| :----------- | :--------------------------------------------- | :----------------------------------------------------------------- |
| **æ„é€ å‡½æ•°** | ç”¨äºåˆ›å»ºå’Œåˆå§‹åŒ–å¯¹è±¡çš„å‡½æ•°                     | é€šå¸¸é¦–å­—æ¯å¤§å†™ï¼›é€šè¿‡ `new` è°ƒç”¨ï¼›å†…éƒ¨ `this` æŒ‡å‘æ–°å®ä¾‹ã€‚          |
| **åŸå‹**     | æ¯ä¸ªå‡½æ•°éƒ½æœ‰çš„ `prototype` å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡  | å®ä¾‹ä¼šå…±äº«åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ï¼›ç”¨äºæ–¹æ³•å­˜å‚¨ï¼ŒèŠ‚çœå†…å­˜ã€‚             |
| **åŸå‹é“¾**   | ç”±å¯¹è±¡é€šè¿‡ `__proto__` é“¾æ¥å½¢æˆçš„é“¾å¼ç»“æ„      | å®ç°ç»§æ‰¿çš„åŸºç¡€ï¼›å±æ€§æŸ¥æ‰¾æ²¿é“¾å‘ä¸Šç›´è‡³æ‰¾åˆ°æˆ–åˆ°ç»ˆç‚¹ã€‚                 |
| **ç»§æ‰¿**     | ä½¿ä¸€ä¸ªå¯¹è±¡èƒ½å¤Ÿè®¿é—®å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•çš„æœºåˆ¶ | åœ¨ JS ä¸­ä¸»è¦é€šè¿‡åŸå‹é“¾å®ç°ï¼›ES6 çš„ `class` å’Œ `extends` æ˜¯è¯­æ³•ç³–ã€‚ |

## 2. æ„é€ å‡½æ•° (Constructor)

æ„é€ å‡½æ•°æ˜¯ç”¨äº**åˆ›å»ºå’Œåˆå§‹åŒ–å¯¹è±¡**çš„ç‰¹æ®Šå‡½æ•°ã€‚

- é€šè¿‡ `new` å…³é”®å­—è°ƒç”¨æ„é€ å‡½æ•°ä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
  1.  åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ã€‚
  2.  å°†æ–°å¯¹è±¡çš„ `__proto__` æŒ‡å‘æ„é€ å‡½æ•°çš„ `prototype` å±æ€§ï¼Œä»è€Œå»ºç«‹åŸå‹é“¾ã€‚
  3.  å°†æ„é€ å‡½æ•°å†…éƒ¨çš„ `this` ç»‘å®šåˆ°è¿™ä¸ªæ–°å¯¹è±¡ã€‚
  4.  æ‰§è¡Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼ˆé€šå¸¸ç”¨äºåˆå§‹åŒ–å±æ€§ï¼‰ã€‚
  5.  å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰æ˜¾å¼è¿”å›å…¶ä»–å¯¹è±¡ï¼Œåˆ™é»˜è®¤è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ã€‚

```javascript
function Person(name, age) {
  // æ„é€ å‡½æ•°é€šå¸¸é¦–å­—æ¯å¤§å†™
  this.name = name; // åˆå§‹åŒ–å®ä¾‹å±æ€§
  this.age = age;
}

// åœ¨æ„é€ å‡½æ•°çš„åŸå‹ä¸Šæ·»åŠ æ–¹æ³•ï¼Œæ‰€æœ‰å®ä¾‹å¯å…±äº«
Person.prototype.sayHello = function () {
  console.log(`Hello, my name is ${this.name} and I am ${this.age} years old.`);
};

const person1 = new Person("Alice", 30); // ä½¿ç”¨ new åˆ›å»ºå®ä¾‹
const person2 = new Person("Bob", 25);

person1.sayHello(); // Hello, my name is Alice and I am 30 years old.
person2.sayHello(); // Hello, my name is Bob and I am 25 years old.
```

## 3. åŸå‹ (Prototype) ä¸åŸå‹é“¾ (Prototype Chain)

### 3.1 åŸå‹ (Prototype)

- æ¯ä¸ª JavaScript å‡½æ•°ï¼ˆé™¤ç®­å¤´å‡½æ•°å¤–ï¼‰éƒ½æœ‰ä¸€ä¸ª `prototype` å±æ€§ï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼ˆç§°ä¸º**åŸå‹å¯¹è±¡**ï¼‰ã€‚
- å½“ä½¿ç”¨ `new` æ„é€ å‡½æ•°åˆ›å»ºå®ä¾‹æ—¶ï¼Œè¯¥å®ä¾‹çš„å†…éƒ¨ `[[Prototype]]` (å¯é€šè¿‡ `__proto__` æˆ– `Object.getPrototypeOf()` è®¿é—®) ä¼šæŒ‡å‘æ„é€ å‡½æ•°çš„ `prototype` å¯¹è±¡ã€‚
- å®šä¹‰åœ¨åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³•å¯ä»¥è¢«æ‰€æœ‰å®ä¾‹**å…±äº«**ï¼Œä»è€Œæœ‰æ•ˆèŠ‚çœå†…å­˜ã€‚

```javascript
console.log(person1.__proto__ === Person.prototype); // true
console.log(Object.getPrototypeOf(person1) === Person.prototype); // true (æ¨èæ–¹å¼)
console.log(Person.prototype.constructor === Person); // true (åŸå‹å¯¹è±¡é»˜è®¤æœ‰constructorå±æ€§æŒ‡å‘æ„é€ å‡½æ•°æœ¬èº«)
```

### 3.2 åŸå‹é“¾ (Prototype Chain)

- æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„åŸå‹å¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå› æ­¤å®ƒä¹Ÿæœ‰è‡ªå·±çš„åŸå‹ï¼Œè¿™ç§é“¾å¼ç»“æ„å°±æ˜¯**åŸå‹é“¾**ã€‚
- å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•æ—¶ï¼ŒJavaScript å¼•æ“ä¼šï¼š
  1.  é¦–å…ˆåœ¨å¯¹è±¡**è‡ªèº«å±æ€§**ä¸­æŸ¥æ‰¾ã€‚
  2.  å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™æ²¿ç€å¯¹è±¡çš„ `__proto__` å‘ä¸Šåˆ°å…¶**åŸå‹å¯¹è±¡**ä¸ŠæŸ¥æ‰¾ã€‚
  3.  å¦‚æœä»æœªæ‰¾åˆ°ï¼Œåˆ™ç»§ç»­æ²¿åŸå‹é“¾å‘ä¸Šï¼ˆåŸå‹çš„åŸå‹ï¼‰ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å±æ€§æˆ–åˆ°è¾¾ç»ˆç‚¹ `null`ã€‚
  4.  å¦‚æœæœ€ç»ˆæœªæ‰¾åˆ°ï¼Œåˆ™è¿”å› `undefined`ã€‚

```javascript
// åŸå‹é“¾ç¤ºä¾‹ï¼šperson1 -> Person.prototype -> Object.prototype -> null

// person1 è‡ªèº«æœ‰ name å±æ€§
console.log(person1.hasOwnProperty("name")); // true

// sayHello æ˜¯åŸå‹ä¸Šçš„æ–¹æ³•ï¼Œéè‡ªèº«å±æ€§
console.log(person1.hasOwnProperty("sayHello")); // false
console.log(person1.sayHello); // ä½†å¯ä»¥è®¿é—®ï¼Œå› ä¸ºåŸå‹é“¾ä¸Šå­˜åœ¨

// toString æ˜¯ Object.prototype çš„æ–¹æ³•ï¼Œè·ç¦»æ›´è¿œï¼Œä½†ä¾ç„¶å¯é€šè¿‡åŸå‹é“¾è®¿é—®
console.log(person1.toString()); // [object Object]
```

ä¸‹é¢æ˜¯åŸå‹é“¾å…³ç³»çš„ç›´è§‚ç¤ºæ„å›¾ï¼š

```mermaid
flowchart TD
    A[person1 å®ä¾‹<br>è‡ªèº«å±æ€§: name, age]
    B[Person.prototype å¯¹è±¡<br>constructor: Person<br>å…±äº«æ–¹æ³•: sayHello]
    C[Object.prototype å¯¹è±¡<br>constructor: Object<br>hasOwnProperty: Æ’<br>toString: Æ’]
    D[null]

    A -- [[Prototype]]<br>åŸå‹é“¾æ¥ --> B
    B -- [[Prototype]]<br>åŸå‹é“¾æ¥ --> C
    C -- [[Prototype]]<br>åŸå‹é“¾æ¥ --> D

    classDef instance fill:#e1f5fe,stroke:#01579b;
    classDef prototype fill:#f3e5f5,stroke:#4a148c;
    classDef terminus fill:#ffebee,stroke:#b71c1c;

    class A instance
    class B,C prototype
    class D terminus
```

## 4. ç»§æ‰¿ (Inheritance)

JavaScript ä¸»è¦é€šè¿‡**åŸå‹é“¾**æ¥å®ç°ç»§æ‰¿ã€‚ æœ‰å¤šç§å®ç°æ–¹å¼ï¼Œä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§æ–¹æ³•ï¼š

### 4.1 åŸå‹é“¾ç»§æ‰¿

**æ ¸å¿ƒæ€æƒ³**ï¼šè®©å­ç±»ï¼ˆSubTypeï¼‰çš„åŸå‹å¯¹è±¡ç­‰äºçˆ¶ç±»ï¼ˆSuperTypeï¼‰çš„ä¸€ä¸ªå®ä¾‹ã€‚
**ç¼ºç‚¹**ï¼š

- æ‰€æœ‰å­ç±»å®ä¾‹å…±äº«åŒä¸€ä¸ªçˆ¶ç±»å®ä¾‹çš„å±æ€§ï¼Œè‹¥çˆ¶ç±»å±æ€§ä¸ºå¼•ç”¨ç±»å‹ï¼Œä¸€ä¸ªå­ç±»å®ä¾‹ä¿®æ”¹è¯¥å±æ€§ä¼šå½±å“æ‰€æœ‰å…¶ä»–å­ç±»å®ä¾‹ã€‚
- æ— æ³•åœ¨åˆ›å»ºå­ç±»å®ä¾‹æ—¶å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚ã€‚

```javascript
function Parent() {
  this.parentProperty = true;
  this.arr = [1, 2, 3]; // å¼•ç”¨ç±»å‹å±æ€§
}
Parent.prototype.getParentProperty = function () {
  return this.parentProperty;
};

function Child() {
  this.childProperty = false;
}

Child.prototype = new Parent(); // æ ¸å¿ƒï¼šå­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»çš„å®ä¾‹

const child1 = new Child();
const child2 = new Child();

console.log(child1.getParentProperty()); // true (é€šè¿‡åŸå‹é“¾è®¿é—®)
console.log(child1.arr); // [1, 2, 3]
child1.arr.push(4); // ä¿®æ”¹ child1 çš„ arr
console.log(child2.arr); // [1, 2, 3, 4] (é—®é¢˜ï¼šchild2 çš„ arr ä¹Ÿè¢«ä¿®æ”¹äº†)
```

### 4.2 æ„é€ å‡½æ•°ç»§æ‰¿ (ç»å…¸ç»§æ‰¿)

**æ ¸å¿ƒæ€æƒ³**ï¼šåœ¨å­ç±»æ„é€ å‡½æ•°å†…éƒ¨è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼ˆä½¿ç”¨ `call` æˆ– `apply` æ–¹æ³•æ”¹å˜ `this` æŒ‡å‘ï¼‰ã€‚
**ä¼˜ç‚¹**ï¼š

- é¿å…äº†å¼•ç”¨ç±»å‹å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«çš„é—®é¢˜ã€‚
- å¯ä»¥åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ é€’å‚æ•°ã€‚
  **ç¼ºç‚¹**ï¼š
- æ–¹æ³•å¿…é¡»åœ¨çˆ¶ç±»æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œæ— æ³•å¤ç”¨ï¼ˆæ¯æ¬¡åˆ›å»ºå®ä¾‹éƒ½ä¼šåˆ›å»ºä¸€éæ–¹æ³•ï¼‰ã€‚
- æ— æ³•ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸Šå®šä¹‰çš„æ–¹æ³•ã€‚

```javascript
function Parent(name) {
  this.name = name;
  this.arr = [1, 2, 3];
  this.sayName = function () {
    // æ–¹æ³•å®šä¹‰åœ¨æ„é€ å‡½æ•°å†…
    console.log(this.name);
  };
}

function Child(name, age) {
  Parent.call(this, name); // æ ¸å¿ƒï¼šåœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå¹¶ä¼ å…¥å­ç±»çš„ this
  this.age = age;
}

const child1 = new Child("Alice", 30);
const child2 = new Child("Bob", 25);

child1.arr.push(4);
console.log(child1.arr); // [1, 2, 3, 4]
console.log(child2.arr); // [1, 2, 3] (å¼•ç”¨ç±»å‹å±æ€§ç‹¬ç«‹äº†)

// console.log(child1.sayName()); // å¯ä»¥å·¥ä½œï¼Œä½†æ–¹æ³•æ˜¯æ¯ä¸ªå®ä¾‹å•ç‹¬åˆ›å»ºçš„å‰¯æœ¬
// console.log(child1 instanceof Parent); // falseï¼Œæ— æ³•ç»§æ‰¿çˆ¶ç±»åŸå‹
```

### 4.3 ç»„åˆç»§æ‰¿ (æœ€å¸¸ç”¨)

**æ ¸å¿ƒæ€æƒ³**ï¼šç»“åˆ**åŸå‹é“¾ç»§æ‰¿**å’Œ**æ„é€ å‡½æ•°ç»§æ‰¿**çš„ä¼˜ç‚¹ã€‚

1.  ä½¿ç”¨**æ„é€ å‡½æ•°ç»§æ‰¿**æ¥ç»§æ‰¿çˆ¶ç±»çš„**å®ä¾‹å±æ€§**ï¼ˆé¿å…å…±äº«é—®é¢˜ï¼‰ã€‚
2.  ä½¿ç”¨**åŸå‹é“¾ç»§æ‰¿**æ¥ç»§æ‰¿çˆ¶ç±»çš„**åŸå‹æ–¹æ³•**ï¼ˆå®ç°æ–¹æ³•å¤ç”¨ï¼‰ã€‚
    **ç¼ºç‚¹**ï¼š

- çˆ¶ç±»æ„é€ å‡½æ•°è¢«è°ƒç”¨äº†ä¸¤æ¬¡ï¼ˆä¸€æ¬¡åœ¨ `call`ï¼Œä¸€æ¬¡åœ¨ `new`ï¼‰ï¼Œå¯èƒ½å­˜åœ¨æ•ˆç‡é—®é¢˜ã€‚
- å­ç±»åŸå‹ä¸Šä¼šæœ‰ä¸€ä»½å¤šä½™çš„çˆ¶ç±»å®ä¾‹å±æ€§ã€‚

```javascript
function Parent(name) {
  this.name = name;
  this.arr = [1, 2, 3];
}
Parent.prototype.sayName = function () {
  // æ–¹æ³•å®šä¹‰åœ¨åŸå‹ä¸Š
  console.log(this.name);
};

function Child(name, age) {
  Parent.call(this, name); // ç¬¬1æ¬¡è°ƒç”¨ Parentï¼šç»§æ‰¿å®ä¾‹å±æ€§
  this.age = age;
}

Child.prototype = new Parent(); // ç¬¬2æ¬¡è°ƒç”¨ Parentï¼šç»§æ‰¿åŸå‹æ–¹æ³•ï¼ˆåŒ…æ‹¬çˆ¶ç±»å®ä¾‹å±æ€§ï¼Œä½†è¢«å­ç±»å®ä¾‹å±æ€§è¦†ç›–ï¼‰
Child.prototype.constructor = Child; // ä¿®å¤ constructor æŒ‡é’ˆï¼ŒæŒ‡å‘ Child
Child.prototype.sayAge = function () {
  console.log(this.age);
};

const child1 = new Child("Alice", 30);
const child2 = new Child("Bob", 25);

child1.arr.push(4);
console.log(child1.arr); // [1, 2, 3, 4]
console.log(child2.arr); // [1, 2, 3] (å®ä¾‹å±æ€§ç‹¬ç«‹)

child1.sayName(); // Alice (åŸå‹æ–¹æ³•å¤ç”¨)
child1.sayAge(); // 30
```

### 4.4 å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ (ç†æƒ³æ–¹æ¡ˆ)

**æ ¸å¿ƒæ€æƒ³**ï¼šè§£å†³ç»„åˆç»§æ‰¿ä¸­çˆ¶ç±»æ„é€ å‡½æ•°è¢«è°ƒç”¨ä¸¤æ¬¡çš„é—®é¢˜ã€‚é€šè¿‡ä¸€ä¸ªä¸­é—´å¯¹è±¡æ¥ç»§æ‰¿çˆ¶ç±»çš„åŸå‹ï¼Œä»è€Œåªç»§æ‰¿åŸå‹ä¸Šçš„æ–¹æ³•è€Œä¸ç»§æ‰¿å®ä¾‹å±æ€§ã€‚
è¿™æ˜¯ç›®å‰å…¬è®¤çš„**æœ€æœ‰æ•ˆ**çš„ç»§æ‰¿æ–¹å¼ã€‚

```javascript
function inheritPrototype(Child, Parent) {
  const prototype = Object.create(Parent.prototype); // åˆ›å»ºçˆ¶ç±»åŸå‹çš„å‰¯æœ¬
  prototype.constructor = Child; // ä¿®å¤ constructor æŒ‡å‘
  Child.prototype = prototype; // å°†å‰¯æœ¬è®¾ç½®ä¸ºå­ç±»çš„åŸå‹
}

function Parent(name) {
  this.name = name;
  this.arr = [1, 2, 3];
}
Parent.prototype.sayName = function () {
  console.log(this.name);
};

function Child(name, age) {
  Parent.call(this, name); // åªè°ƒç”¨ä¸€æ¬¡ Parent æ„é€ å‡½æ•°ï¼Œç»§æ‰¿å®ä¾‹å±æ€§
  this.age = age;
}

// ä½¿ç”¨å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼Œè€Œä¸æ˜¯ Child.prototype = new Parent()
inheritPrototype(Child, Parent);

Child.prototype.sayAge = function () {
  console.log(this.age);
};

const child = new Child("Alice", 30);
child.sayName(); // Alice
child.sayAge(); // 30
```

### 4.5 ES6 çš„ Class ç»§æ‰¿

ES6 å¼•å…¥äº† `class`ã€`extends`ã€`super` å…³é”®å­—ï¼Œæä¾›äº†æ›´æ¥è¿‘ä¼ ç»Ÿè¯­è¨€çš„ã€æ¸…æ™°çš„è¯­æ³•ç³–æ¥å®ç°ç»§æ‰¿ï¼Œå…¶åº•å±‚åŸç†ä»ç„¶æ˜¯**åŸå‹é“¾**ã€‚

```javascript
class Parent {
  constructor(name) {
    this.name = name;
    this.arr = [1, 2, 3];
  }
  sayName() {
    // æ–¹æ³•è‡ªåŠ¨æ·»åŠ åˆ° Parent.prototype ä¸Š
    console.log(this.name);
  }
}

class Child extends Parent {
  // extends å®ç°åŸå‹ç»§æ‰¿
  constructor(name, age) {
    super(name); // super ç›¸å½“äº Parent.call(this, name)ï¼Œå¿…é¡»åœ¨è®¿é—® this ä¹‹å‰è°ƒç”¨
    this.age = age;
  }
  sayAge() {
    console.log(this.age);
  }
}

const child1 = new Child("Alice", 30);
const child2 = new Child("Bob", 25);

child1.arr.push(4);
console.log(child1.arr); // [1, 2, 3, 4]
console.log(child2.arr); // [1, 2, 3]

child1.sayName(); // Alice
child1.sayAge(); // 30

console.log(Child.prototype.__proto__ === Parent.prototype); // true (extends å»ºç«‹äº†åŸå‹é“¾)
```

ä¸‹é¢æ˜¯ ES6 Class ç»§æ‰¿çš„åŸå‹é“¾ç¤ºæ„å›¾ï¼š

```mermaid

flowchart TD
    subgraph A[ES6 Class ç»§æ‰¿åŸå‹é“¾]
        direction LR

        subgraph Instance[å®ä¾‹å¯¹è±¡]
            child1[child1 å®ä¾‹<br>è‡ªèº«å±æ€§: name, age]
        end

        subgraph ChildClass[å­ç±»æ„é€ å‡½æ•°]
            Child[Child]
            ChildProto[Child.prototype<br>å…±äº«æ–¹æ³•: sayAge<br>constructor: Child]
        end

        subgraph ParentClass[çˆ¶ç±»æ„é€ å‡½æ•°]
            Parent[Parent]
            ParentProto[Parent.prototype<br>å…±äº«æ–¹æ³•: sayName<br>constructor: Parent]
        end

        subgraph BuiltIn[å†…ç½®å¯¹è±¡]
            ObjectConstructor[Object]
            ObjectProto[Object.prototype<br>å†…ç½®æ–¹æ³•: toString]
        end

        Null[null]

        child1 -- __proto__ --> ChildProto
        ChildProto -- __proto__ --> ParentProto
        ParentProto -- __proto__ --> ObjectProto
        ObjectProto -- __proto__ --> Null

        Child -- prototype --> ChildProto
        Parent -- prototype --> ParentProto
        ObjectConstructor -- prototype --> ObjectProto

        Child -- __proto__ --> Parent
        Parent -- __proto__ --> ObjectConstructor
        ObjectConstructor -- __proto__ --> FunctionProto
    end
```

ä¸ºäº†å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ä¸åŒç»§æ‰¿æ–¹å¼çš„ç‰¹ç‚¹ï¼Œä¸‹é¢ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“å®ƒä»¬çš„ä¼˜ç¼ºç‚¹å’Œé€‚ç”¨åœºæ™¯ï¼š

| ç»§æ‰¿æ–¹å¼           | ä¼˜ç‚¹                                                         | ç¼ºç‚¹                                                   | é€‚ç”¨åœºæ™¯                             |
| :----------------- | :----------------------------------------------------------- | :----------------------------------------------------- | :----------------------------------- |
| **åŸå‹é“¾ç»§æ‰¿**     | å®ç°ç®€å•                                                     | å¼•ç”¨ç±»å‹å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼›æ— æ³•å‘çˆ¶ç±»ä¼ å‚ã€‚           | åŸºæœ¬ä¸å†ä½¿ç”¨                         |
| **æ„é€ å‡½æ•°ç»§æ‰¿**   | å¯å‘çˆ¶ç±»ä¼ å‚ï¼›é¿å…äº†å¼•ç”¨å±æ€§å…±äº«ã€‚                           | æ— æ³•ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•ï¼›æ–¹æ³•æ— æ³•å¤ç”¨ã€‚               | éœ€è¦ç‹¬ç«‹å®ä¾‹å±æ€§çš„åœºæ™¯               |
| **ç»„åˆç»§æ‰¿**       | èåˆä¸¤è€…ä¼˜ç‚¹ï¼›å¯ä¼ å‚ï¼›æ–¹æ³•å¤ç”¨ï¼›å¼•ç”¨å±æ€§ç‹¬ç«‹ã€‚               | çˆ¶ç±»æ„é€ å‡½æ•°è¢«è°ƒç”¨ä¸¤æ¬¡ï¼›å­ç±»åŸå‹åŒ…å«å¤šä½™çˆ¶ç±»å®ä¾‹å±æ€§ã€‚ | å¸¸ç”¨ï¼Œä½†å¯èƒ½æœ‰æ€§èƒ½é¡¾è™‘               |
| **å¯„ç”Ÿç»„åˆç»§æ‰¿**   | æ˜¯ç»„åˆç»§æ‰¿çš„ä¼˜åŒ–ï¼›åªè°ƒç”¨ä¸€æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼›åŸå‹é“¾çº¯å‡€ï¼›é«˜æ•ˆã€‚ | å®ç°ç¨å¤æ‚                                             | éœ€è¦ç²¾ç¡®ç»§æ‰¿æ—¶çš„ç†æƒ³é€‰æ‹©             |
| **ES6 Class ç»§æ‰¿** | è¯­æ³•ç®€æ´ç›´è§‚ï¼›æœ€æ¥è¿‘ä¼ ç»Ÿ OOPï¼›åº•å±‚æ˜¯åŸå‹é“¾ï¼Œæ˜¯æœªæ¥æ ‡å‡†ã€‚     | éœ€è¦ç†è§£åº•å±‚ä»æ˜¯åŸå‹æœºåˆ¶                               | **ç°ä»£é¡¹ç›®é¦–é€‰**ï¼Œéœ€è¦æ¸…æ™°ç»§æ‰¿ç»“æ„æ—¶ |

## 5. æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹

1.  **ä¼˜å…ˆä½¿ç”¨ ES6 Class è¯­æ³•**ï¼š`class` å’Œ `extends` æä¾›äº†æ›´æ¸…æ™°ã€æ›´æ˜“äºç»´æŠ¤çš„ç»§æ‰¿è¯­æ³•ï¼Œæ˜¯ç°ä»£ JavaScript å¼€å‘çš„é¦–é€‰ã€‚
2.  **æ–¹æ³•å®šä¹‰åœ¨åŸå‹ä¸Š**ï¼šæ— è®ºä½¿ç”¨ä½•ç§æ–¹å¼ï¼Œå°†æ–¹æ³•å®šä¹‰åœ¨åŸå‹ä¸Šå¯ä»¥å®ç°å…±äº«ï¼ŒèŠ‚çœå†…å­˜ã€‚
3.  **è°¨æ…ä¿®æ”¹åŸç”ŸåŸå‹**ï¼šé¿å…ç›´æ¥ä¿®æ”¹ `Object.prototype` æˆ– `Array.prototype` ç­‰å†…ç½®å¯¹è±¡çš„åŸå‹ï¼Œè¿™å¯èƒ½å¯¼è‡´å‘½åå†²çªå’Œéš¾ä»¥è°ƒè¯•çš„ç»´æŠ¤é—®é¢˜ã€‚
4.  **ç†è§£ `instanceof` å’Œ `hasOwnProperty`**ï¼š
    - `instanceof` è¿ç®—ç¬¦ç”¨äºæ£€æŸ¥å¯¹è±¡çš„åŸå‹é“¾ä¸Šæ˜¯å¦å­˜åœ¨æŸä¸ªæ„é€ å‡½æ•°çš„ `prototype` å±æ€§ã€‚
    - `hasOwnProperty` æ–¹æ³•ç”¨äºæ£€æŸ¥å±æ€§æ˜¯å¦æ˜¯å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼ˆéç»§æ‰¿è€Œæ¥ï¼‰ã€‚
5.  **ä½¿ç”¨ `Object.create()` è¿›è¡Œçº¯å‡€çš„åŸå‹ç»§æ‰¿**ï¼š`Object.create(proto)` å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶å°†å…¶ `[[Prototype]]` ç›´æ¥æŒ‡å‘æŒ‡å®šçš„ `proto` å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸ç›´æ¥çš„åŸå‹ç»§æ‰¿æ–¹å¼ã€‚

å¸Œæœ›è¿™ä»½è¯¦ç»†çš„è§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ JavaScript ä¸­çš„åŸå‹ã€åŸå‹é“¾ã€æ„é€ å‡½æ•°å’Œç»§æ‰¿ã€‚è¿™äº›æ˜¯ JavaScript é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºçŸ³ï¼Œç†è§£å®ƒä»¬å¯¹äºç¼–å†™å¤æ‚ã€é«˜æ•ˆçš„åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚
