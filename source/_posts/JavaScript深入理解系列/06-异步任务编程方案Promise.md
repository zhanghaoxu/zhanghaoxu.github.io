---
title: 06-JavaScript  å¼‚æ­¥ä»»åŠ¡ç¼–ç¨‹è§£å†³æ–¹æ¡ˆPromise è¯¦è§£
---

Promise æ˜¯ ES6 (ECMAScript 2015) å¼•å…¥çš„ä¸€ç§**ç”¨äºå¤„ç†å¼‚æ­¥ä»»åŠ¡**çš„æ ‡å‡†åŒ–è§£å†³æ–¹æ¡ˆã€‚å®ƒæ—¨åœ¨æ›´ä¼˜é›…åœ°ç®¡ç†å¼‚æ­¥ä»£ç ï¼Œè§£å†³ä¼ ç»Ÿçš„â€œå›è°ƒåœ°ç‹±â€ï¼ˆCallback Hellï¼‰é—®é¢˜ï¼Œå¹¶æä¾›æ›´å¥½çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚

æˆ‘ä»¬å¯ä»¥å°† Promise çœ‹ä½œæ˜¯å¼‚æ­¥ä»»åŠ¡çš„ç®¡ç†å™¨ï¼Œå®ƒå¯¹å¼‚æ­¥ä»»åŠ¡è¿›è¡Œäº†ç»Ÿä¸€çš„æŠ½è±¡ã€‚

### ğŸŒŸ å¼‚æ­¥ä»»åŠ¡çš„ç»Ÿä¸€æŠ½è±¡

1. çŠ¶æ€å’Œç»“æœæŠ½è±¡ï¼šPromise å¯¹å¼‚æ­¥ä»»åŠ¡çŠ¶æ€å’Œç»“æœè¿›è¡Œäº†ç»Ÿä¸€çš„æŠ½è±¡ï¼Œå®ƒæœ‰ä¸‰ç§ä¸å¯é€†çš„çŠ¶æ€ï¼š

   - **Pendingï¼ˆè¿›è¡Œä¸­ï¼‰**ï¼šåˆå§‹çŠ¶æ€ï¼Œè¡¨ç¤ºå¼‚æ­¥æ“ä½œå°šæœªå®Œæˆã€‚
   - **Fulfilledï¼ˆå·²æˆåŠŸï¼‰**ï¼šè¡¨ç¤ºå¼‚æ­¥æ“ä½œæˆåŠŸå®Œæˆã€‚æ­¤æ—¶ä¼šæœ‰ä¸€ä¸ªä¸å¯å˜çš„**ç»“æœå€¼ï¼ˆvalueï¼‰**ã€‚
   - **Rejectedï¼ˆå·²å¤±è´¥ï¼‰**ï¼šè¡¨ç¤ºå¼‚æ­¥æ“ä½œå¤±è´¥ã€‚æ­¤æ—¶ä¼šæœ‰ä¸€ä¸ªä¸å¯å˜çš„**å¤±è´¥åŸå› ï¼ˆreasonï¼‰**ã€‚

   çŠ¶æ€ä¸€æ—¦ä» `Pending` å˜ä¸º `Fulfilled` æˆ– `Rejected`ï¼Œå°±**ä¸å¯å†æ”¹å˜**ã€‚

2. å›è°ƒæ³¨å†ŒæŠ½è±¡ï¼šPromise å¯¹å¼‚æ­¥ä»»åŠ¡çš„å›è°ƒæ³¨å†Œè¿›è¡Œäº†ç»Ÿä¸€çš„æŠ½è±¡å’Œç®¡ç†ï¼Œæ— è®ºå¼‚æ­¥æ“ä½œæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œæœ€ç»ˆéƒ½å¯ä»¥é€šè¿‡æ³¨å†Œå›è°ƒå‡½æ•°æ¥å¤„ç†ç»“æœã€‚

   - **`thenï¼ˆï¼‰`**ï¼šç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œæˆåŠŸå’Œå¤±è´¥çš„æƒ…å†µï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•° **æˆåŠŸå’Œå¤±è´¥å›è°ƒå‡½æ•°ï¼ˆonFulfilledï¼ŒonRejectedï¼‰**ï¼Œè¯¥å‡½æ•°ä¼šåœ¨ Promise çŠ¶æ€å˜ä¸º `fulfilled`æˆ– `rejected` æ—¶è¢«è°ƒç”¨ï¼Œå¹¶æ¥æ”¶å¼‚æ­¥æ“ä½œçš„ç»“æœå€¼ä½œä¸ºå‚æ•°ã€‚

   - **`catch()`**ï¼šç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œå¤±è´¥çš„æƒ…å†µï¼Œæ¥æ”¶ä¸€ä¸ª**å¤±è´¥å›è°ƒå‡½æ•°ï¼ˆonRejectedï¼‰**ï¼Œè¯¥å‡½æ•°ä¼šåœ¨ Promise çŠ¶æ€å˜ä¸º `rejected` æ—¶è¢«è°ƒç”¨ï¼Œå¹¶æ¥æ”¶å¼‚æ­¥æ“ä½œçš„å¤±è´¥åŸå› ä½œä¸ºå‚æ•°,å®ƒæ˜¯ `then(,onRejected)` æ–¹æ³•çš„è¯­æ³•ç³–ï¼Œç”¨äºå¤„ç†å¤±è´¥æƒ…å†µã€‚

   - **`finally()`**ï¼šæ— è®º Promise çŠ¶æ€æœ€ç»ˆæ˜¯ `fulfilled` è¿˜æ˜¯ `rejected`ï¼Œ`finally()` æ–¹æ³•ä¸­çš„å›è°ƒå‡½æ•°éƒ½ä¼šè¢«è°ƒç”¨ã€‚è¿™ä½¿å¾— `finally()` æˆä¸ºæ‰§è¡Œæ¸…ç†æ“ä½œï¼ˆå¦‚å…³é—­æ–‡ä»¶ã€é‡Šæ”¾èµ„æºç­‰ï¼‰çš„å¥½åœ°æ–¹ã€‚

   é€šè¿‡ä»¥ä¸Šæ–¹æ³•æ³¨å†Œçš„å›è°ƒå‡½æ•°æ˜¯å¼‚æ­¥å¾®ä»»åŠ¡ã€‚

3. ä»»åŠ¡é—´ä¾èµ–æŠ½è±¡ï¼šPromise å¯¹å¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„ä¾èµ–å…³ç³»è¿›è¡Œäº†æŠ½è±¡ï¼Œ `then()` è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼Œå…è®¸ä½ åœ¨å½“å‰ Promise æˆåŠŸåçš„å›è°ƒä¸­ä¸­ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œè¿™ç§æ“ä½œè¢«ç§°ä¸ºé“¾å¼è°ƒç”¨ã€‚é€šè¿‡é“¾å¼è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å¤„ç†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„ç»“æœï¼Œç¡®ä¿å®ƒä»¬æŒ‰ç…§æ­£ç¡®çš„é¡ºåºæ‰§è¡Œï¼Œå®ç°å¤æ‚çš„å¼‚æ­¥ä»»åŠ¡ç¼–æ’ã€‚

### æ‰§è¡Œå™¨ ï¼ˆExecutorï¼‰

æ‰§è¡Œå™¨æ˜¯ Promise æ„é€ å‡½æ•°çš„å‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ‰§è¡Œå¼‚æ­¥æ“ä½œå¹¶æ ¹æ®æ“ä½œç»“æœè°ƒç”¨ `resolve` æˆ– `reject` å‡½æ•°ã€‚æ‰§è¡Œå™¨å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š

- **`resolve`**ï¼šå½“å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå°† Promise çŠ¶æ€ç”± `pending` æ”¹ä¸º `fulfilled`ï¼Œå¹¶å¯ä¼ é€’ç»“æœå€¼ã€‚
- **`reject`**ï¼šå½“å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå°† Promise çŠ¶æ€ç”± `pending` æ”¹ä¸º `rejected`ï¼Œå¹¶å¯ä¼ é€’é”™è¯¯åŸå› ã€‚

æ‰§è¡Œå™¨æœ¬è´¨ä¸Šæ˜¯æˆ‘ä»¬çš„å¼‚æ­¥ä»»åŠ¡ï¼Œå®ƒä¼šåœ¨ Promise æ„é€ å‡½æ•°å†…éƒ¨è¢«ç«‹å³è°ƒç”¨ï¼Œå¹¶ä½¿ç”¨ `resolve` æˆ– `reject` å‡½æ•°æ¥æ”¹å˜ Promise çš„çŠ¶æ€å’Œç»“æœï¼Œä¸ Promise å¯¹è±¡è¿›è¡Œäº¤äº’ã€‚

### ğŸ› ï¸ åŸºæœ¬ç”¨æ³•

åˆ›å»ºä¸€ä¸ª Promise éœ€è¦ä½¿ç”¨ `new Promise()` æ„é€ å‡½æ•°ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ª**æ‰§è¡Œå™¨å‡½æ•°ï¼ˆexecutorï¼‰**ã€‚è¿™ä¸ªæ‰§è¡Œå™¨å‡½æ•°æ¥æ”¶ä¸¤ä¸ªç”± JavaScript å¼•æ“æä¾›çš„å‡½æ•°ä½œä¸ºå‚æ•°ï¼š

- **`resolve`**ï¼šå½“å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå°† Promise çŠ¶æ€ç”± `pending` æ”¹ä¸º `fulfilled`ï¼Œå¹¶å¯ä¼ é€’ç»“æœå€¼ã€‚
- **`reject`**ï¼šå½“å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå°† Promise çŠ¶æ€ç”± `pending` æ”¹ä¸º `rejected`ï¼Œå¹¶å¯ä¼ é€’é”™è¯¯åŸå› ã€‚

```javascript
const myPromise = new Promise((resolve, reject) => {
  // æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œä¾‹å¦‚ API è¯·æ±‚
  setTimeout(() => {
    const success = Math.random() > 0.5; // éšæœºæ¨¡æ‹ŸæˆåŠŸæˆ–å¤±è´¥
    if (success) {
      resolve("æ“ä½œæˆåŠŸï¼æ•°æ®æ˜¯ï¼š..."); // å°†çŠ¶æ€å˜ä¸º fulfilled
    } else {
      reject(new Error("æ“ä½œå¤±è´¥ï¼")); // å°†çŠ¶æ€å˜ä¸º rejected
    }
  }, 1000);
});
```

### ğŸ”— å¤„ç†ç»“æœï¼š`.then()`, `.catch()`, `.finally()`

åˆ›å»º Promise åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•å¤„ç†å…¶æœ€ç»ˆçŠ¶æ€ï¼š

- **`.then()`**ï¼šæ¥æ”¶ä¸¤ä¸ª**å¯é€‰**çš„å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå¤„ç† `fulfilled` çŠ¶æ€å’Œç»“æœå€¼ï¼Œç¬¬äºŒä¸ªå¤„ç† `rejected` çŠ¶æ€å’Œå¤±è´¥åŸå› ã€‚
  ```javascript
  myPromise.then(
    (value) => {
      console.log("æˆåŠŸï¼š", value);
    }, // åœ¨ promise è¢«è§£ææ—¶æ‰§è¡Œ
    (error) => {
      console.error("å¤±è´¥ï¼š", error);
    } // åœ¨ promise è¢«æ‹’ç»æ—¶æ‰§è¡Œ
  );
  ```
- **`.catch()`**ï¼šä¸“é—¨ç”¨äºæ•è·å’Œå¤„ç† `rejected` çŠ¶æ€æˆ–é“¾ä¸­æŠ›å‡ºçš„é”™è¯¯ã€‚ç›¸å½“äº `.then(null, rejectionHandler)`ã€‚
  ```javascript
  myPromise
    .then((value) => {
      console.log("æˆåŠŸï¼š", value);
    })
    .catch((error) => {
      console.error("æ•è·é”™è¯¯ï¼š", error);
    }); // æ•è· then ä¸­çš„é”™è¯¯æˆ–ä¹‹å‰çš„æ‹’ç»
  ```
- **`.finally()`**ï¼šæ— è®º Promise æœ€ç»ˆæ˜¯ `fulfilled` è¿˜æ˜¯ `rejected`ï¼Œéƒ½ä¼šæ‰§è¡Œçš„å›è°ƒã€‚å¸¸ç”¨äºæ¸…ç†å·¥ä½œã€‚
  ```javascript
  myPromise
    .then((value) => {
      console.log("æˆåŠŸï¼š", value);
    })
    .catch((error) => {
      console.error("é”™è¯¯ï¼š", error);
    })
    .finally(() => {
      console.log("æ“ä½œç»“æŸï¼Œæ— è®ºæˆè´¥ã€‚");
    });
  ```

### â° é“¾å¼è°ƒç”¨ï¼ˆChainingï¼‰

Promise çš„ `.then()`, `.catch()`, `.finally()` æ–¹æ³•**éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise**ï¼Œè¿™å…è®¸ä½ å°†å¤šä¸ªå¼‚æ­¥æ“ä½œæŒ‰é¡ºåºä¸²è”èµ·æ¥ï¼Œå½¢æˆ**é“¾å¼è°ƒç”¨**ã€‚è¿™æ˜¯è§£å†³â€œå›è°ƒåœ°ç‹±â€çš„å…³é”®ã€‚

- å¦‚æœ `.then()` ä¸­çš„å›è°ƒå‡½æ•°ï¼š
  - **è¿”å›ä¸€ä¸ªå€¼**ï¼ˆåŒ…æ‹¬ `undefined`ï¼‰ï¼Œæ–°è¿”å›çš„ Promise å°†æˆä¸º **`fulfilled`** çŠ¶æ€ï¼Œå¹¶å°†è¯¥å€¼ä½œä¸ºç»“æœã€‚
  - **æŠ›å‡ºå¼‚å¸¸**ï¼Œæ–°è¿”å›çš„ Promise å°†æˆä¸º **`rejected`** çŠ¶æ€ï¼Œå¹¶å°†æŠ›å‡ºçš„é”™è¯¯ä½œä¸ºåŸå› ã€‚
  - **è¿”å›å¦ä¸€ä¸ª Promise**ï¼Œæ–°è¿”å›çš„ Promise å°†**é‡‡ç”¨**è¿™ä¸ª Promise çš„æœ€ç»ˆçŠ¶æ€å’Œç»“æœã€‚

```javascript
function fetchUserData(userId) {
  return new Promise((resolve) => {
    setTimeout(() => resolve({ id: userId, name: "Alice" }), 1000);
  });
}

function fetchUserPosts(userId) {
  return new Promise((resolve) => {
    setTimeout(() => resolve(["Post 1", "Post 2"]), 1000);
  });
}

fetchUserData(123)
  .then((user) => {
    console.log("è·å–ç”¨æˆ·æˆåŠŸï¼š", user.name);
    return fetchUserPosts(user.id); // è¿”å›ä¸€ä¸ªæ–°çš„ Promise
  })
  .then((posts) => {
    console.log("è·å–ç”¨æˆ·å¸–å­æˆåŠŸï¼š", posts);
    return posts.length; // è¿”å›ä¸€ä¸ªæ™®é€šå€¼
  })
  .then((numberOfPosts) => {
    console.log("å¸–å­æ•°é‡ï¼š", numberOfPosts);
  })
  .catch((error) => {
    // é“¾ä¸­ä»»ä½•åœ°æ–¹çš„é”™è¯¯éƒ½ä¼šè¢«è¿™é‡Œæ•è·
    console.error("å‘ç”Ÿé”™è¯¯ï¼š", error);
  });
```

### ğŸ“¦ å¹¶è¡Œå¤„ç†å¤šä¸ªå¼‚æ­¥æ“ä½œ

Promise æä¾›äº†å‡ ä¸ªé™æ€æ–¹æ³•æ¥å¤„ç†å¤šä¸ªå¹¶è¡Œçš„å¼‚æ­¥æ“ä½œï¼š

1.  **`Promise.all(iterable)`**ï¼š

    - æ¥æ”¶ä¸€ä¸ª Promise å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚æ•°ç»„ï¼‰ã€‚
    - å½“æ‰€æœ‰è¾“å…¥çš„ Promise éƒ½å˜ä¸º `fulfilled` æ—¶ï¼Œå®ƒè¿”å›çš„ Promise æ‰å˜ä¸º `fulfilled`ï¼Œç»“æœæ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰æˆåŠŸç»“æœçš„æ•°ç»„ï¼Œ**é¡ºåºä¸è¾“å…¥ä¸€è‡´**ã€‚
    - å¦‚æœ**ä»»ä½•ä¸€ä¸ª**è¾“å…¥çš„ Promise è¢« `rejected`ï¼Œåˆ™ç«‹å³ `rejected`ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªå¤±è´¥çš„åŸå› ã€‚
    - **é€‚ç”¨åœºæ™¯**ï¼šå¤šä¸ªå¼‚æ­¥ä»»åŠ¡**å…¨éƒ¨æˆåŠŸ**æ‰èƒ½ç»§ç»­ï¼Œä¸”å½¼æ­¤ä¸ä¾èµ–ã€‚

2.  **`Promise.race(iterable)`**ï¼š

    - æ¥æ”¶ä¸€ä¸ª Promise å¯è¿­ä»£å¯¹è±¡ã€‚
    - åªè¦è¾“å…¥çš„ Promise ä¸­**æœ‰ä¸€ä¸ª**çŠ¶æ€å˜ä¸º `fulfilled` æˆ– `rejected`ï¼Œå®ƒè¿”å›çš„ Promise å°±é‡‡ç”¨é‚£ä¸ª**æœ€å…ˆæ”¹å˜çŠ¶æ€**çš„ Promise çš„çŠ¶æ€å’Œç»“æœã€‚
    - **é€‚ç”¨åœºæ™¯**ï¼šä¸ºå¼‚æ­¥æ“ä½œè®¾ç½®è¶…æ—¶ã€ç«äº‰è·å–æœ€å¿«ç»“æœã€‚

3.  **`Promise.allSettled(iterable)`** (ES2020)ï¼š

    - æ¥æ”¶ä¸€ä¸ª Promise å¯è¿­ä»£å¯¹è±¡ã€‚
    - ç­‰å¾…æ‰€æœ‰è¾“å…¥çš„ Promise éƒ½**å®Œæˆ**ï¼ˆæ— è®ºæ˜¯ `fulfilled` è¿˜æ˜¯ `rejected`ï¼‰ã€‚
    - è¿”å›ä¸€ä¸ª Promiseï¼Œå…¶ç»“æœæ˜¯æè¿°æ¯ä¸ª Promise æœ€ç»ˆçŠ¶æ€å’Œç»“æœï¼ˆæˆ–åŸå› ï¼‰çš„å¯¹è±¡æ•°ç»„ã€‚
    - **é€‚ç”¨åœºæ™¯**ï¼šéœ€è¦çŸ¥é“æ‰€æœ‰å¼‚æ­¥æ“ä½œçš„æœ€ç»ˆç»“æœï¼Œæ— è®ºæˆè´¥ã€‚

4.  **`Promise.resolve(value)`** & **`Promise.reject(reason)`**ï¼š
    - åˆ›å»ºä¸€å€‹ç«‹å³å¤„äº `fulfilled`ï¼ˆå·²è§£å†³ï¼‰æˆ– `rejected`ï¼ˆå·²æ‹’ç»ï¼‰çŠ¶æ€çš„ Promiseã€‚
    - å¸¸ç”¨äºå°†å€¼è½¬æ¢ä¸º Promiseï¼Œæˆ–å¼€å§‹ä¸€ä¸ªé“¾å¼è°ƒç”¨ã€‚

```javascript
// Promise.all ç¤ºä¾‹
const promise1 = Promise.resolve("ç»“æœ1");
const promise2 = new Promise((resolve) => setTimeout(resolve, 100, "ç»“æœ2"));
const promise3 = 42; // éPromiseå€¼ä¼šè¢« Promise.resolve è½¬æ¢

Promise.all([promise1, promise2, promise3])
  .then((values) => {
    console.log(values); // è¾“å‡º: ["ç»“æœ1", "ç»“æœ2", 42]
  })
  .catch((error) => {
    console.error(error);
  });

// Promise.race ç¤ºä¾‹ï¼ˆè¶…æ—¶æ§åˆ¶ï¼‰
const dataPromise = fetchData(); // å‡è®¾è¿™æ˜¯ä¸€ä¸ªè€—æ—¶çš„è¯·æ±‚
const timeoutPromise = new Promise((_, reject) =>
  setTimeout(() => reject(new Error("è¯·æ±‚è¶…æ—¶")), 5000)
);

Promise.race([dataPromise, timeoutPromise])
  .then((data) => console.log("æ•°æ®è·å–æˆåŠŸ:", data))
  .catch((error) => console.error("é”™è¯¯:", error.message));
```

### âš ï¸ å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ

1.  **é¿å… Promise åœ°ç‹±**ï¼šè™½ç„¶ Promise è§£å†³äº†å›è°ƒåœ°ç‹±ï¼Œä½†ä¸æ°å½“çš„é“¾å¼è°ƒç”¨ä»å¯èƒ½å½¢æˆåµŒå¥—ï¼Œè¿™æ—¶å¯ç»“åˆ **`async/await`**ï¼ˆES2017ï¼‰ä½¿ä»£ç æ›´æ¸…æ™°ã€‚
2.  **æ€»æ˜¯æ•è·é”™è¯¯**ï¼šä½¿ç”¨ `.catch()` æˆ–åœ¨ `async/await` ä¸­ä½¿ç”¨ `try...catch` æ¥é¿å…æœªå¤„ç†çš„ Promise æ‹’ç»ã€‚
3.  **åœ¨ `.then()` ä¸­è¿”å› Promise**ï¼šä¸ºäº†é“¾å¼è°ƒç”¨èƒ½æ­£ç¡®ä¼ é€’çŠ¶æ€å’Œå€¼ï¼Œåœ¨ `.then()` çš„å›è°ƒä¸­è‹¥è¿›è¡Œå¼‚æ­¥æ“ä½œï¼Œåº”è¿”å›æ–°çš„ Promiseã€‚
4.  **`async/await` æ˜¯è¯­æ³•ç³–**ï¼š`async` å‡½æ•°æ€»æ˜¯è¿”å›ä¸€ä¸ª Promiseï¼Œ`await` ç”¨äºç­‰å¾…ä¸€ä¸ª Promise çš„è§£å†³ã€‚å®ƒä»¬è®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œä½†ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚

```javascript
// ä½¿ç”¨ async/await é‡å†™é“¾å¼è°ƒç”¨çš„ä¾‹å­
async function getUserInfo() {
  try {
    const user = await fetchUserData(123);
    console.log("è·å–ç”¨æˆ·æˆåŠŸï¼š", user.name);
    const posts = await fetchUserPosts(user.id);
    console.log("è·å–ç”¨æˆ·å¸–å­æˆåŠŸï¼š", posts);
    const numberOfPosts = posts.length;
    console.log("å¸–å­æ•°é‡ï¼š", numberOfPosts);
    return numberOfPosts; //  async å‡½æ•°è¿”å›çš„ Promise ä¼š resolve ä¸ºè¿™ä¸ªå€¼
  } catch (error) {
    console.error("å‘ç”Ÿé”™è¯¯ï¼š", error);
    throw error; // å°†é”™è¯¯ç»§ç»­æŠ›å‡º
  }
}

getUserInfo();
```

### ğŸ’ æ€»ç»“

Promise æ˜¯ç°ä»£ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³ã€‚å®ƒé€šè¿‡**çŠ¶æ€ç®¡ç†**ã€**é“¾å¼è°ƒç”¨**å’Œ**ä¸°å¯Œçš„ç»„åˆæ–¹æ³•**ï¼ˆå¦‚ `Promise.all`ï¼‰ï¼Œæ˜¾è‘—æ”¹å–„äº†å¼‚æ­¥ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œé”™è¯¯å¤„ç†èƒ½åŠ›ã€‚è™½ç„¶ `async/await` æä¾›äº†æ›´ç›´è§‚çš„è¯­æ³•ï¼Œä½†å®ƒä»¬åº•å±‚ä¾ç„¶ä¾èµ–äº Promiseã€‚å› æ­¤ï¼Œæ·±å…¥ç†è§£ Promise å¯¹äºæŒæ¡ JavaScript å¼‚æ­¥ç¼–ç¨‹è‡³å…³é‡è¦ã€‚
